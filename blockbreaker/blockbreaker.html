<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Wood Block Puzzle 10x10</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f4f1e9;
  }
  canvas {
    background: #ddd2c4;
    border: 3px solid #8b5a2b;
    margin-top: 10px;
  }
  .pieces {
    margin-top: 10px;
  }
  .piece-btn {
    background: #8b5a2b;
    color: #fff;
    border: none;
    padding: 10px;
    margin: 5px;
    border-radius: 5px;
    cursor: pointer;
  }
  #score {
    font-size: 1.2em;
    margin-top: 10px;
  }
</style>
</head>
<body>

<h1>Mini Wood Block Puzzle 10x10</h1>
<div id="score">Score: 0</div>
<canvas id="board" width="500" height="500"></canvas>
<div class="pieces" id="pieces"></div>

<script>
const canvas = document.getElementById('board');
const ctx = canvas.getContext('2d');

const rows = 10;
const cols = 10;
const cellSize = 50;

let board = Array(rows).fill().map(() => Array(cols).fill(0));
let score = 0;

const shapes = [
  [[1]],          // single block
  [[1,1]],        // horizontal 2
  [[1],[1]],      // vertical 2
  [[1,1],[1,0]],  // L shape
  [[1,1],[1,1]]   // 2x2 square
];

let availablePieces = [];
let currentPiece = null;

// Draw the board
function drawBoard(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      if(board[r][c]){
        ctx.fillStyle = '#8b5a2b';
        ctx.fillRect(c*cellSize,r*cellSize,cellSize,cellSize);
        ctx.strokeStyle = '#fff';
        ctx.strokeRect(c*cellSize,r*cellSize,cellSize,cellSize);
      } else {
        ctx.strokeStyle = '#aaa';
        ctx.strokeRect(c*cellSize,r*cellSize,cellSize,cellSize);
      }
    }
  }
  if(currentPiece){
    ctx.fillStyle = 'rgba(139,90,43,0.7)';
    for(let r=0;r<currentPiece.shape.length;r++){
      for(let c=0;c<currentPiece.shape[r].length;c++){
        if(currentPiece.shape[r][c]){
          ctx.fillRect((currentPiece.x+c)*cellSize,(currentPiece.y+r)*cellSize,cellSize,cellSize);
        }
      }
    }
  }
}

// Check if piece can be placed
function canPlace(shape, x, y){
  for(let r=0;r<shape.length;r++){
    for(let c=0;c<shape[r].length;c++){
      if(shape[r][c]){
        let newY = y+r;
        let newX = x+c;
        if(newY<0 || newY>=rows || newX<0 || newX>=cols) return false;
        if(board[newY][newX]) return false;
      }
    }
  }
  return true;
}

// Place piece on board
function placePiece(){
  const shape = currentPiece.shape;
  for(let r=0;r<shape.length;r++){
    for(let c=0;c<shape[r].length;c++){
      if(shape[r][c]){
        board[currentPiece.y+r][currentPiece.x+c] = 1;
      }
    }
  }
  availablePieces = availablePieces.filter(p => p !== currentPiece);
  currentPiece = null;
  checkClears();
  if(availablePieces.length === 0) generatePieces();
  updatePiecesUI();
  drawBoard();
  updateScoreUI();
}

// Check for full rows/columns
function checkClears(){
  let linesCleared = 0;
  // Check rows
  for(let r=0;r<rows;r++){
    if(board[r].every(c => c===1)){
      for(let c=0;c<cols;c++) board[r][c] = 0;
      linesCleared++;
    }
  }
  // Check columns
  for(let c=0;c<cols;c++){
    if(board.every(r => r[c]===1)){
      for(let r=0;r<rows;r++) board[r][c] = 0;
      linesCleared++;
    }
  }
  score += linesCleared * 10;
}

// Generate 3 random pieces
function generatePieces(){
  availablePieces = [];
  for(let i=0;i<3;i++){
    const idx = Math.floor(Math.random()*shapes.length);
    availablePieces.push({shape: shapes[idx]});
  }
  updatePiecesUI();
}

// Update the pieces buttons
function updatePiecesUI(){
  const container = document.getElementById('pieces');
  container.innerHTML = '';
  availablePieces.forEach((p,i)=>{
    const btn = document.createElement('button');
    btn.className = 'piece-btn';
    btn.innerText = 'Piece ' + (i+1);
    btn.onclick = () => {
      currentPiece = p;
    }
    container.appendChild(btn);
  });
}

// Update score display
function updateScoreUI(){
  document.getElementById('score').innerText = 'Score: ' + score;
}

// Mouse click to place piece
canvas.addEventListener('click', e=>{
  if(!currentPiece) return;
  const rect = canvas.getBoundingClientRect();
  const x = Math.floor((e.clientX - rect.left)/cellSize);
  const y = Math.floor((e.clientY - rect.top)/cellSize);
  currentPiece.x = x;
  currentPiece.y = y;
  if(canPlace(currentPiece.shape, x, y)){
    placePiece();
  }
});

// Initialize
generatePieces();
drawBoard();
updateScoreUI();
</script>

</body>
</html>
