<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wood Block Puzzle</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #f0f0f5;
    padding-top: 20px;
  }
  #gameContainer {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #grid {
    display: grid;
    grid-template-columns: repeat(10, 40px);
    grid-template-rows: repeat(10, 40px);
    gap: 2px;
    background: #333;
    padding: 5px;
    border-radius: 5px;
  }
  .cell {
    width: 40px;
    height: 40px;
    background: #eee;
    border-radius: 3px;
    transition: background 0.2s, transform 0.2s;
  }
  .filled {
    background: #8B4513;
  }
  #blocks {
    display: flex;
    gap: 10px;
    margin-top: 15px;
  }
  .block {
    display: grid;
    gap: 2px;
    cursor: pointer;
  }
  .block div {
    width: 30px;
    height: 30px;
    background: #8B4513;
    border-radius: 3px;
  }
  #score {
    margin-top: 15px;
    font-size: 18px;
  }
  #gameOver {
    margin-top: 15px;
    font-size: 20px;
    color: red;
    display: none;
  }
  button {
    margin-top: 10px;
    padding: 6px 12px;
    font-size: 16px;
    cursor: pointer;
  }
  #creatorLink a {
    font-size: 16px;
    color: #1a4bbb;
    text-decoration: none;
  }
  #creatorLink a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>
<h1>Wood Block Puzzle</h1>
<div id="gameContainer">
  <div id="grid"></div>
  <div id="blocks"></div>
  <div id="score">Score: 0</div>
  <div id="gameOver">Game Over!</div>
  <button id="restart">Restart</button>
  <button id="showCreator">Show Creator</button>
  <div id="creatorLink" style="margin-top:10px; display:none;"></div>
</div>

<script>
const gridSize = 10;
let grid = [];
let score = 0;

const shapes = [
  [[1]], [[1,1]], [[1,1,1]],
  [[1],[1]], [[1,1],[1,1]], [[1,1,1],[0,1,0]],
  [[1,0],[1,1]], [[1,1],[0,1]], [[1,1,1,1]]
];

const gridEl = document.getElementById("grid");
const blocksEl = document.getElementById("blocks");
const scoreEl = document.getElementById("score");
const gameOverEl = document.getElementById("gameOver");
const restartBtn = document.getElementById("restart");
const showCreatorBtn = document.getElementById("showCreator");
const creatorLinkDiv = document.getElementById("creatorLink");

function initGrid(){
  grid = [];
  gridEl.innerHTML="";
  for(let r=0;r<gridSize;r++){
    let row=[];
    for(let c=0;c<gridSize;c++){
      let cell = document.createElement("div");
      cell.classList.add("cell");
      gridEl.appendChild(cell);
      row.push(0);
    }
    grid.push(row);
  }
}

function generateBlock(){
  let shape = shapes[Math.floor(Math.random()*shapes.length)];
  let block = document.createElement("div");
  block.classList.add("block");
  block.shape = shape;
  block.style.gridTemplateColumns = `repeat(${shape[0].length}, 30px)`;
  block.style.gridTemplateRows = `repeat(${shape.length}, 30px)`;
  shape.forEach(row=>{
    row.forEach(cell=>{
      let div = document.createElement("div");
      if(cell) div.style.background = "#8B4513";
      else div.style.background = "transparent";
      block.appendChild(div);
    });
  });
  block.onclick = ()=>placeBlock(block);
  blocksEl.appendChild(block);
}

function placeBlock(block){
  let shape = block.shape;
  for(let r=0;r<=gridSize-shape.length;r++){
    for(let c=0;c<=gridSize-shape[0].length;c++){
      if(canPlace(shape,r,c)){
        doPlace(shape,r,c);
        blocksEl.innerHTML="";
        checkLines();
        scoreEl.textContent = "Score: "+score;
        generateBlocksSet();
        return;
      }
    }
  }
  gameOver();
}

function canPlace(shape,row,col){
  for(let r=0;r<shape.length;r++){
    for(let c=0;c<shape[0].length;c++){
      if(shape[r][c] && grid[row+r][col+c]) return false;
    }
  }
  return true;
}

function doPlace(shape,row,col){
  let cells = gridEl.children;
  for(let r=0;r<shape.length;r++){
    for(let c=0;c<shape[0].length;c++){
      if(shape[r][c]){
        grid[row+r][col+c]=1;
        let idx = (row+r)*gridSize+(col+c);
        cells[idx].classList.add("filled");
      }
    }
  }
}

function animateClear(cellsToClear){
  return new Promise(resolve=>{
    cellsToClear.forEach(idx=>{
      let cell = gridEl.children[idx];
      cell.style.transform = "scale(1.3)";
      cell.style.opacity = "0";
    });
    setTimeout(()=>{
      cellsToClear.forEach(idx=>{
        let cell = gridEl.children[idx];
        cell.classList.remove("filled");
        cell.style.transform = "scale(1)";
        cell.style.opacity = "1";
      });
      resolve();
    }, 200);
  });
}

async function checkLines(){
  let cellsToClear = [];
  // check rows
  for(let r=0;r<gridSize;r++){
    if(grid[r].every(v=>v===1)){
      for(let c=0;c<gridSize;c++){
        grid[r][c]=0;
        cellsToClear.push(r*gridSize+c);
      }
      score += 10;
    }
  }
  // check columns
  for(let c=0;c<gridSize;c++){
    let full = true;
    for(let r=0;r<gridSize;r++){
      if(grid[r][c]===0) full=false;
    }
    if(full){
      for(let r=0;r<gridSize;r++){
        grid[r][c]=0;
        cellsToClear.push(r*gridSize+c);
      }
      score +=10;
    }
  }
  if(cellsToClear.length>0){
    await animateClear(cellsToClear);
  }
}

function generateBlocksSet(){
  for(let i=0;i<3;i++) generateBlock();
}

function gameOver(){
  gameOverEl.style.display="block";
  blocksEl.innerHTML="";
}

restartBtn.onclick = ()=>{
  gameOverEl.style.display="none";
  score=0;
  scoreEl.textContent="Score: 0";
  initGrid();
  generateBlocksSet();
}

showCreatorBtn.onclick = () => {
  creatorLinkDiv.innerHTML = `<a href="https://github.com/jacobcreation" target="_blank">https://github.com/jacobcreation</a>`;
  creatorLinkDiv.style.display = "block";
}

// start game
initGrid();
generateBlocksSet();
</script>
</body>
</html>
